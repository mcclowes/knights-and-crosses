$(function(){function a(a,d){var e=a.toLowerCase(),r=d.toLowerCase();return r>e?-1:e>r?1:0}function d(){this.cardName="",this.addCard=function(){function d(a){for(var d=0,e=0;e<o.length;e++)window.console.log(o[e]+", "+a.cardName),o[e]===a.cardName&&d++;return d}window.console.log(o),this.cardBody=jQuery("<div/>",{"class":"cardSelector"}),jQuery("<div/>",{"class":this.cardName,text:this.cardName}).appendTo(this.cardBody);var e=this;$(this.cardBody[0]).click(function(){e.cardBody.remove(),delete e});var r=d(this);window.console.log(r),0!=r?4>=r?(e.cardBody.remove(),delete e,$("."+this.cardName,o).addClass(r++)):window.alert("Card limit reached for this card"):(o.push(this.cardName),o.sort(a),$(".cardList:first").append(this.cardBody))}}function e(){this.cardName="",this.cardEffects=[],this.cardImage="",this.cardBody="",this.cardAvgValue="",this.cardMinValue="",this.cardMaxValue="",this.chooseCard=function(a){window.console.log($(this));var e=new d;e.cardName=a.cardName,e.addCard()},this.createCard=function(){this.cardBody=jQuery("<div/>",{"class":"card drawn spaced "+this.cardName.toLowerCase().split(" ").join("_")}),jQuery("<div/>",{"class":"cardName",text:this.cardName}).appendTo(this.cardBody),jQuery("<div/>",{"class":"cardEffects",text:this.cardEffects.join([separator=". "])+"."}).appendTo(this.cardBody),jQuery("<div/>",{"class":"cardAvgValue",text:this.cardAvgValue}).appendTo(this.cardBody),jQuery("<div/>",{"class":"cardMinValue",text:this.cardMinValue}).appendTo(this.cardBody),jQuery("<div/>",{"class":"cardMaxValue",text:this.cardMaxValue}).appendTo(this.cardBody);var a=this;$(this.cardBody[0]).click(function(){a.chooseCard(a)}),$(".cardPool:first").append(this.cardBody)}}function r(){for(var a=0;a<c.length;a++){var d=new e;d.cardName=c[a].name,d.cardEffects=c[a].effects,d.cardAvgValue=(c[a].total/c[a].count).toFixed(0),d.cardMinValue=c[a].min,d.cardMaxValue=c[a].max,window.console.log(d),d.createCard()}}function t(a){for(var e=0;a>e;e++){var r=new d;r.cardName=a[e],r.addCard()}}var o=[],c=[];window.console.log("Starting");var i="json/card_data.json";$.getJSON(i,function(a){console.log(a),c=a,r(),console.log(c)}),$("#save").click(function(a){for(var d=[],e=0;e<o.length;e++)d.push(o[e]);window.console.log(d),this.href="data:plain/text,"+JSON.stringify(d)}),$("#load").change(function(a){var d=new FileReader;d.onload=function(){var a=d.result;window.console.log(dataUrl);var e=document.getElementById("output");e.src=a};var e=d.readAsText(this.files[0]);t(e)})});